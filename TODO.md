1. Consider adapting ideas from https://github.com/vitoshka/ac-math